{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\chris\\\\Documents\\\\TS\\\\Christopher-BA\\\\house-rule-platform\\\\node_modules\\\\@angular-devkit\\\\build-angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport axios from 'axios';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./user.service\";\nexport class BackEndService {\n  constructor(user) {\n    this.user = user;\n    this.targetURL = 'http://localhost:1337/api/';\n  }\n\n  getHouseRules() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      axios.get(`${_this.targetURL}house-rules`, {}).then(response => {\n        console.log(response);\n      }).catch(error => {\n        console.log('An error occurred:', error.response);\n      });\n    })();\n  }\n\n  getHouseRuleById(id, pop) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let response = undefined;\n\n      try {\n        const url = `${_this2.targetURL}house-rules/${id}${pop ? '?populate=*' : ''}`;\n        console.log(url);\n        response = yield axios.get(url, {});\n        console.log(response);\n      } catch (e) {\n        console.log('An error occurred:', e.response);\n      }\n\n      return response === null || response === void 0 ? void 0 : response.data.data;\n    })();\n  }\n\n  addHouseRule(hr, thumbnail) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const fD = new FormData();\n        fD.append('files', thumbnail);\n        const fileUpload = yield axios.post(`${_this3.targetURL}upload`, fD, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        hr.thumbnail = fileUpload.data[0].id;\n        const response = yield axios.post(`${_this3.targetURL}house-rules`, {\n          data: hr\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        console.log(response);\n      } catch (e) {\n        console.log('An error occurred:', e.response);\n      }\n    })();\n  }\n\n}\n\nBackEndService.ɵfac = function BackEndService_Factory(t) {\n  return new (t || BackEndService)(i0.ɵɵinject(i1.UserService));\n};\n\nBackEndService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BackEndService,\n  factory: BackEndService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/chris/Documents/TS/Christopher-BA/house-rule-platform/src/app/back-end.service.ts"],"names":["axios","i0","i1","BackEndService","constructor","user","targetURL","getHouseRules","get","then","response","console","log","catch","error","getHouseRuleById","id","pop","undefined","url","e","data","addHouseRule","hr","thumbnail","fD","FormData","append","fileUpload","post","headers","Authorization","localStorage","getItem","ɵfac","BackEndService_Factory","t","ɵɵinject","UserService","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./user.service\";\r\nexport class BackEndService {\r\n    constructor(user) {\r\n        this.user = user;\r\n        this.targetURL = 'http://localhost:1337/api/';\r\n    }\r\n    async getHouseRules() {\r\n        axios.get(`${this.targetURL}house-rules`, {})\r\n            .then(response => {\r\n            console.log(response);\r\n        })\r\n            .catch(error => {\r\n            console.log('An error occurred:', error.response);\r\n        });\r\n    }\r\n    async getHouseRuleById(id, pop) {\r\n        let response = undefined;\r\n        try {\r\n            const url = `${this.targetURL}house-rules/${id}${pop ? '?populate=*' : ''}`;\r\n            console.log(url);\r\n            response = await axios.get(url, {});\r\n            console.log(response);\r\n        }\r\n        catch (e) {\r\n            console.log('An error occurred:', e.response);\r\n        }\r\n        return response === null || response === void 0 ? void 0 : response.data.data;\r\n    }\r\n    async addHouseRule(hr, thumbnail) {\r\n        try {\r\n            const fD = new FormData();\r\n            fD.append('files', thumbnail);\r\n            const fileUpload = await axios.post(`${this.targetURL}upload`, fD, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            hr.thumbnail = fileUpload.data[0].id;\r\n            const response = await axios.post(`${this.targetURL}house-rules`, { data: hr }, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            });\r\n            console.log(response);\r\n        }\r\n        catch (e) {\r\n            console.log('An error occurred:', e.response);\r\n        }\r\n    }\r\n}\r\nBackEndService.ɵfac = function BackEndService_Factory(t) { return new (t || BackEndService)(i0.ɵɵinject(i1.UserService)); };\r\nBackEndService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: BackEndService, factory: BackEndService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}